<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.pcwk.ehr.bookmark">
	<insert id="addBookmark" parameterType="map">
		INSERT INTO favorites
		(favorites_no, user_no, user_id, stock_code,
		stock_name)
		SELECT
		favorites_seq.nextval, 4, #{userId}, #{stockCode}, #{stockName}
		FROM
		member
		WHERE user_id = #{userId}
	</insert>
	<delete id="deleteBookmark">
		DELETE FROM favorites
		WHERE user_id = #{userId} AND
		stock_code = #{stockCode} AND stock_name = #{stockName}
	</delete>
	<select id="countBookmark" resultType="int">
		SELECT count(*) FROM
		favorites WHERE user_id = #{userId}
	</select>
	<select id="checkBookmark" resultType="int">
		SELECT COUNT(*)
		FROM
		favorites
		WHERE stock_code = #{stockCode} AND user_id = #{userId}
	</select>
</mapper>


